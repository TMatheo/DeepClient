using System.Collections;
using UnityEngine;
using VRC.Udon;

namespace DeepCore.Client.Module.Exploits
{
    internal class UdonNuker
    {
        public static int Cunter = 0;
        public static IEnumerator Nuke()
        {
            foreach (var udon in GameObject.FindObjectsOfType<UdonBehaviour>())
            {
                foreach (var a in udon._eventTable)
                {
                    udon.SendCustomNetworkEvent(VRC.Udon.Common.Interfaces.NetworkEventTarget.All, a.key);
                    Cunter++;
                }
            }
            Misc.VrcExtensions.HudNotif($"Nuked {Cunter.ToString()} udon.");
            Cunter = 0;
            yield break;
        }
    }
}
